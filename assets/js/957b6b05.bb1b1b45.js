"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[546],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),u=r,h=d["".concat(s,".").concat(u)]||d[u]||m[u]||i;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},38019:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const i={sidebar_position:2},o="Docker containers",l={unversionedId:"Docker",id:"Docker",title:"Docker containers",description:"Our application design incorporates the use of Docker containers to manage it.",source:"@site/docs/01-Docker.mdx",sourceDirName:".",slug:"/Docker",permalink:"/OpenLeakedDocs/docs/Docker",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Getting started in 5 minutes \u23f1\ufe0f",permalink:"/OpenLeakedDocs/docs/intro"},next:{title:"Introduction",permalink:"/OpenLeakedDocs/docs/Database/Introduction"}},s={},p=[{value:"Versioning",id:"versioning",level:2},{value:"Why containerized architecture?",id:"why-containerized-architecture",level:2},{value:"Deploying all or one image",id:"deploying-all-or-one-image",level:2}],c={toc:p};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"docker-containers"},"Docker containers"),(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"https://www.docker.com/wp-content/uploads/2022/03/vertical-logo-monochromatic.png",alt:"drawing",width:"40%",height:"200"})),(0,r.kt)("p",null,"Our application design incorporates the use of ",(0,r.kt)("a",{parentName:"p",href:"https://www.docker.com/"},"Docker")," containers to manage it.\nIn the subsequnet section, we will provide a brief overview of how containerization is implemented in our application. "),(0,r.kt)("p",null,"Our application makes use of three different types of ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose"),"files: "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-compose-production"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"This file manages the production-level containers, some of which are simplified through the use of server packages.\nThis approach reduces both the space requirements and complexity of the containers. "))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-compose"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"This file is used throughout the development process. It uilizes Docker images that are not all server-based, which allows the images to contain tools that could be used for development purposes. "))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-compose-import-database")," ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"This container contains the necessary images required to import data into the database.")))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The Redis Image is a great example of how we use different images in our application. The development image contains RedisStack, which is a usefull tool to manage the Redis Cache database. ")),(0,r.kt)("h2",{id:"versioning"},"Versioning"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Container"),(0,r.kt)("th",{parentName:"tr",align:null},"Images"),(0,r.kt)("th",{parentName:"tr",align:null},"default ports"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Nginx"),(0,r.kt)("td",{parentName:"tr",align:null},"nginx:latest"),(0,r.kt)("td",{parentName:"tr",align:null},"80")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Backend"),(0,r.kt)("td",{parentName:"tr",align:null},"maven:3.8.7-amazoncorretto-17"),(0,r.kt)("td",{parentName:"tr",align:null},"8080")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"MariaDB"),(0,r.kt)("td",{parentName:"tr",align:null},"mariadb:latest"),(0,r.kt)("td",{parentName:"tr",align:null},"3306")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Redis"),(0,r.kt)("td",{parentName:"tr",align:null},"redis-stack:latest"),(0,r.kt)("td",{parentName:"tr",align:null},"6379")))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"In production, the frontend of our application is not containerized. Instead, it is rendered client-side via HTML, which is provided by the reverse proxy, Nginx.\nTo support this approach, Nginx is configured to listen for HTTP traffic on port 5173 from the frontend. ")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"You can modify the used ports by editing the ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose")," files. ")),(0,r.kt)("h2",{id:"why-containerized-architecture"},"Why containerized architecture?"),(0,r.kt)("p",null,"Our choise of a containerized architecture is motivated by several reasons.\nFirstly, it enables us to accomodate different development enviroments and ensure compatibility with the server.\nWhile the same goal can be achieved using Virtual Machines, it comes at cost - using more resources.\nIn contrast, containers allow us to use the same Host-OS, avoiding duplication of the OS by packaging the required binaries and libraries into each container. Communication between containers are facilitated through the use of a reverse proxy and network bridges in the docker file."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"By default, the containers do not inherit any system files from the Host-OS, including timezone files. If the server(s) are deployed in regions outside of the ",(0,r.kt)("inlineCode",{parentName:"p"},"TZ=Europe/Copenhagen")," timezone, it is important to modify this setting in the relevant compose file to ensure proper functionality of the application. ")),(0,r.kt)("h2",{id:"deploying-all-or-one-image"},"Deploying all or one image"),(0,r.kt)("p",null,"For first time installing please follow this ",(0,r.kt)("a",{parentName:"p",href:"intro#-installation"},"installation guide"),". "),(0,r.kt)("p",null,"After setting up the installation for the first time you can restart the applcation by running the follwing commands:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"To restart all containers",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker compose up --build all \n"))),(0,r.kt)("li",{parentName:"ol"},"To restart an individual container",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker compose up --build <container-name>\n")))))}d.isMDXComponent=!0}}]);