"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[546],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(n),u=r,h=d["".concat(p,".").concat(u)]||d[u]||m[u]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},38019:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const o={sidebar_position:2},i="Docker containers",l={unversionedId:"Docker",id:"Docker",title:"Docker containers",description:"Docker containers are used to manage the application. In the following section we briefly descripe the containerized aspect of our applicaiton design.",source:"@site/docs/01-Docker.mdx",sourceDirName:".",slug:"/Docker",permalink:"/OpenLeakedDocs/docs/Docker",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/OpenLeakedDocs/docs/intro"},next:{title:"Introduction",permalink:"/OpenLeakedDocs/docs/Database/Introduction"}},p={},s=[{value:"Versioning",id:"versioning",level:2},{value:"Why containerized architecture?",id:"why-containerized-architecture",level:2},{value:"Deployment",id:"deployment",level:2}],c={toc:s};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"docker-containers"},"Docker containers"),(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"https://www.docker.com/wp-content/uploads/2022/03/vertical-logo-monochromatic.png",alt:"drawing",width:"40%",height:"200"})),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.docker.com/"},"Docker")," containers are used to manage the application. In the following section we briefly descripe the containerized aspect of our applicaiton design."),(0,r.kt)("p",null,"There are three different types of docker-compose nessesary for the application. "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-compose-production"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Used to manage the production level containers. Some of which are simplified by making use of server packages.\nThis reduces the space and complexity. "))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-compose"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"This docker compose file is used throughout development. It utilises Docker images that are not all server based.\nThis allows the images to contain tools that could be used for development. "))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-compose-import-database")," ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"A usefull container containing the images requred to import data into the database. ")))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"A great example of the different images is the Redis Image, where the development image contains RedisStack.\nThis is a usefull tool to manage the Redis Cache database")),(0,r.kt)("h2",{id:"versioning"},"Versioning"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Container"),(0,r.kt)("th",{parentName:"tr",align:null},"Images"),(0,r.kt)("th",{parentName:"tr",align:null},"default ports"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Nginx"),(0,r.kt)("td",{parentName:"tr",align:null},"nginx:latest"),(0,r.kt)("td",{parentName:"tr",align:null},"80")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Backend"),(0,r.kt)("td",{parentName:"tr",align:null},"maven:3.8.7-amazoncorretto-17"),(0,r.kt)("td",{parentName:"tr",align:null},"8080")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"MariaDB"),(0,r.kt)("td",{parentName:"tr",align:null},"mariadb:latest"),(0,r.kt)("td",{parentName:"tr",align:null},"3306")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Redis"),(0,r.kt)("td",{parentName:"tr",align:null},"redis-stack:latest"),(0,r.kt)("td",{parentName:"tr",align:null},"6379")))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The front end is not containerized but rendered client side in HTML send by HTTP from Nginx.\nHowever Nginx is listening for HTTP traffic on port 5173 for the Frontend")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"You can change the required ports if you have a service already running by editing the ",(0,r.kt)("a",{parentName:"p",href:"#"},"docker-compose.yml")," file\nThe same can be done for the deployment Docker compose file. ")),(0,r.kt)("h2",{id:"why-containerized-architecture"},"Why containerized architecture?"),(0,r.kt)("p",null,"This is simply to accomodate different development enviroments and to ensure that the final application is compatible with the server. "),(0,r.kt)("p",null,"The same goal is achievable by the use of Virtual Machines - But at the cost of resources. "),(0,r.kt)("p",null,"Containers allows us to use the same host-os and avoid duplicating the OS by packagig the required binaries and libraries to each container. "),(0,r.kt)("p",null,"Communication is done through the reverse proxy and network bridges between containers. "),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"The containers will by default not inerhit any system files from the host-os. This includes the timezone files.\nIf the server(s) are deployed to regions out of the ",(0,r.kt)("inlineCode",{parentName:"p"},"TZ=Europe/Copenhagen")," timezone please change that in the compose file. ")),(0,r.kt)("h2",{id:"deployment"},"Deployment"),(0,r.kt)("p",null,"In order to run the application choose either of the versions of the software first clone the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Open-Leaked/Monorepo"},"GitHub Repository"),"."),(0,r.kt)("p",null,"Select either of the 3 ",(0,r.kt)("inlineCode",{parentName:"p"},"Docker Compose files")," and type in the following command"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker compose build all\n")),(0,r.kt)("p",null,"To build individual images use "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker compose build <image>\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The development compose file also contains a ",(0,r.kt)("inlineCode",{parentName:"p"},"frontend")," image. This is to enable automatic change update in React.\nThis feature is disbled in production where it is simply rendered HTML")))}d.isMDXComponent=!0}}]);